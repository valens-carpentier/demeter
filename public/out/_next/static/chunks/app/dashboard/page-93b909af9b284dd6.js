(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{73801:(e,a,t)=>{Promise.resolve().then(t.bind(t,60178))},60178:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>F});var s=t(95155),i=t(12115),n=t(78562),r=t(10810),l=t(35417),o=t(64665),c=t(42479),d=t(63592),m=t(2241),u=t(22282),h=t(96854),_=t(76046),v=t(87597),x=t(63879),A=t(88968),f=t(57200),g=t.n(f),L=t(15108);function p(){let e=(0,i.useContext)(L.r),a=(0,i.useContext)(L.y),[t,f]=(0,i.useState)([]),[p,j]=(0,i.useState)(null),[b,N]=(0,i.useState)(""),[C,y]=(0,i.useState)(!1),[k,F]=(0,i.useState)(!1),[S,w]=(0,i.useState)(""),V=(0,_.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{let e=(await (0,x.A)()).map(e=>({token:e.token,owner:e.owner,name:e.name,sizeInAcres:e.sizeInAcres,totalTokenSupply:e.totalTokenSupply,valuation:e.valuation,expectedOutcomePercentage:e.expectedOutcomePercentage,pricePerToken:e.pricePerToken,isActive:e.isActive,timestamp:e.timestamp}));f(e)}catch(e){console.error("Error loading farms:",e)}})()},[]);let H=e=>{j(e),F(!0)},M=async()=>{if(p&&e&&b&&a)try{y(!0);let t=parseInt(b),s=await (0,A.Q)(p.token,e,t,a);w(s)}catch(e){console.error("Failed to buy tokens:",e),alert(e instanceof Error?e.message:"Failed to buy tokens. Please try again."),F(!1)}finally{y(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.A,{className:g().farmListContainer,children:[(0,s.jsxs)(r.A,{className:g().farmListTitle,children:["Available Farms (",t.filter(e=>e.isActive).length,")"]}),(0,s.jsx)(l.Ay,{container:!0,spacing:3,className:g().farmListGrid,children:t.filter(e=>e.isActive).map((a,t)=>(0,s.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:4,lg:4,children:(0,s.jsx)(o.A,{className:g().farmCard,children:(0,s.jsxs)(c.A,{children:[(0,s.jsx)(r.A,{className:g().farmName,children:a.name}),(0,s.jsxs)(d.A,{className:g().farmInvestmentRow,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(r.A,{className:g().investmentLabel,children:"Valuation"}),(0,s.jsxs)(r.A,{className:g().investmentValue,children:["$",a.valuation.toLocaleString()]})]}),(0,s.jsx)(m.A,{orientation:"vertical",flexItem:!0,sx:{mx:2}}),(0,s.jsxs)("div",{children:[(0,s.jsx)(r.A,{className:g().investmentLabel,children:"Token Price"}),(0,s.jsxs)(r.A,{className:g().tokenPrice,children:["$",a.pricePerToken]})]})]}),(0,s.jsx)(d.A,{className:g().farmMetrics,children:(0,s.jsxs)("div",{className:g().metricsButtonContainer,children:[(0,s.jsxs)("div",{className:g().metricsContent,children:[(0,s.jsx)(r.A,{className:g().metricLabel,children:"Expected Valuation Growth"}),(0,s.jsxs)(r.A,{className:g().metricValue,children:[a.expectedOutcomePercentage,"%"]})]}),(0,s.jsx)(u.A,{variant:"contained",className:g().viewPropertyButton,disabled:!a.isActive||!e,onClick:()=>H(a),children:e?a.isActive?"Buy":"Sold Out":(0,s.jsx)(d.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,s.jsx)(h.A,{size:16,sx:{color:"white"}})})})]})})]})})},t))}),(0,s.jsx)(d.A,{sx:{mt:3,display:"flex",justifyContent:"center"},children:(0,s.jsx)(u.A,{variant:"outlined",className:g().farmViewDetailsButton,onClick:()=>{a&&V.push("/dashboard/marketplace?passkeyId=".concat(a.rawId))},children:"See all farms"})}),0===t.length&&(0,s.jsx)(r.A,{className:g().noFarmsMessage,children:"No farms available yet."})]}),(0,s.jsx)(v.A,{open:k,onClose:()=>{F(!1),w(""),N("")},selectedFarm:{name:(null==p?void 0:p.name)||"",token:(null==p?void 0:p.token)||"",pricePerToken:(null==p?void 0:p.pricePerToken)||0},buyAmount:b,onBuyAmountChange:e=>N(e),onBuyConfirm:()=>M(),isBuying:C,transactionHash:S})]})}var j=t(35849),b=t(50882),N=t.n(b);function C(){let e=(0,i.useContext)(L.r),[a,t]=(0,i.useState)([]),[l,o]=(0,i.useState)(0),[c,m]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{if(e)try{m(!0);let a=await (0,j.I)(e),s=await (0,j.c)(e);t(a),o(s)}catch(e){console.error("Failed to fetch holdings:",e)}finally{m(!1)}})()},[e]),(0,s.jsxs)(n.A,{className:N().holdingListContainer,children:[(0,s.jsxs)(d.A,{className:N().holdingListHeader,children:[(0,s.jsx)(r.A,{className:N().holdingListTitle,children:"My Holdings"}),(0,s.jsxs)(d.A,{className:N().totalValueContainer,children:[(0,s.jsx)(r.A,{className:N().holdingLabel,children:"Total Holdings Value:"}),(0,s.jsxs)(r.A,{className:N().holdingValue,children:["$",l.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),(0,s.jsxs)(d.A,{className:N().assetsHeader,children:[(0,s.jsx)(r.A,{className:N().headerCell,children:"Farm Name"}),(0,s.jsx)(r.A,{className:N().headerCell,children:"Farm Token"}),(0,s.jsx)(r.A,{className:N().headerCell,children:"Number of Tokens"}),(0,s.jsx)(r.A,{className:N().headerCell,children:"Farm Valuation"}),(0,s.jsx)(r.A,{className:N().headerCell,children:"Your Share"})]}),c?(0,s.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",p:4},children:(0,s.jsx)(h.A,{color:"inherit",size:24})}):(0,s.jsx)(s.Fragment,{children:a.length>0?a.map((e,a)=>(0,s.jsxs)(d.A,{className:N().assetRow,children:[(0,s.jsx)(r.A,{className:N().assetCell,children:e.farmName}),(0,s.jsx)(r.A,{className:N().assetCell,children:e.tokenSymbol}),(0,s.jsx)(r.A,{className:N().assetCell,children:e.tokenBalance.toLocaleString()}),(0,s.jsxs)(r.A,{className:N().assetCell,children:["$",e.farmValuation.toLocaleString()]}),(0,s.jsxs)(r.A,{className:N().assetCell,children:["$",e.userShare.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]},a)):(0,s.jsx)(r.A,{className:N().noAssetsMessage,children:"No holdings yet..."})})]})}var y=t(81036),k=t.n(y);function F(){let e=(0,i.useContext)(L.y),a=(0,_.useRouter)();return(0,i.useEffect)(()=>{e&&a.push("/dashboard?passkeyId=".concat(e.rawId))},[e,a]),(0,s.jsx)("div",{className:k().dashboardContainer,children:(0,s.jsxs)("div",{className:k().dashboardStack,children:[(0,s.jsx)("section",{className:k().holdingsSection,children:(0,s.jsx)(C,{})}),(0,s.jsx)("section",{className:k().farmsSection,children:(0,s.jsx)(p,{})})]})})}},30555:(e,a,t)=>{"use strict";t.d(a,{A:()=>r,K:()=>n});var s=t(81045),i=t(37157);function n(e){return(0,i.Ay)("MuiDivider",e)}let r=(0,s.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},78562:(e,a,t)=>{"use strict";t.d(a,{A:()=>g});var s=t(60160),i=t(85407),n=t(12115),r=t(43463),l=t(7123),o=t(10683),c=t(89142),d=t(3255),m=t(12567),u=t(81045),h=t(37157);function _(e){return(0,h.Ay)("MuiPaper",e)}(0,u.A)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var v=t(95155);let x=["className","component","elevation","square","variant"],A=e=>{let{square:a,elevation:t,variant:s,classes:i}=e;return(0,l.A)({root:["root",s,!a&&"rounded","elevation"===s&&"elevation".concat(t)]},_,i)},f=(0,c.Ay)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,a)=>{let{ownerState:t}=e;return[a.root,a[t.variant],!t.square&&a.rounded,"elevation"===t.variant&&a["elevation".concat(t.elevation)]]}})(e=>{var a;let{theme:t,ownerState:s}=e;return(0,i.A)({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!s.square&&{borderRadius:t.shape.borderRadius},"outlined"===s.variant&&{border:"1px solid ".concat((t.vars||t).palette.divider)},"elevation"===s.variant&&(0,i.A)({boxShadow:(t.vars||t).shadows[s.elevation]},!t.vars&&"dark"===t.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,o.X4)("#fff",(0,d.A)(s.elevation)),", ").concat((0,o.X4)("#fff",(0,d.A)(s.elevation)),")")},t.vars&&{backgroundImage:null==(a=t.vars.overlays)?void 0:a[s.elevation]}))}),g=n.forwardRef(function(e,a){let t=(0,m.b)({props:e,name:"MuiPaper"}),{className:n,component:l="div",elevation:o=1,square:c=!1,variant:d="elevation"}=t,u=(0,s.A)(t,x),h=(0,i.A)({},t,{component:l,elevation:o,square:c,variant:d}),_=A(h);return(0,v.jsx)(f,(0,i.A)({as:l,ownerState:h,className:(0,r.A)(_.root,n),ref:a},u))})},3255:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=e=>((e<1?5.11916*e**2:4.5*Math.log(e+1)+2)/100).toFixed(2)},57200:e=>{e.exports={farmListContainer:"FarmList_farmListContainer__yORDJ",farmListTitle:"FarmList_farmListTitle__Aplie",farmListGrid:"FarmList_farmListGrid__xGODV",farmName:"FarmList_farmName__SaPtt",farmItem:"FarmList_farmItem__aaob7",farmStatusChip:"FarmList_farmStatusChip__EEhdZ",farmViewDetailsButton:"FarmList_farmViewDetailsButton__mT7OJ",noFarmsMessage:"FarmList_noFarmsMessage__jV_rD",farmInvestmentRow:"FarmList_farmInvestmentRow__jrbaY",investmentLabel:"FarmList_investmentLabel__5ZfnT",investmentValue:"FarmList_investmentValue__zMwL4",tokenPrice:"FarmList_tokenPrice__qVm19",farmMetrics:"FarmList_farmMetrics__1_dlX",metricsButtonContainer:"FarmList_metricsButtonContainer__9V6D7",metricsContent:"FarmList_metricsContent__0i6J3",metricLabel:"FarmList_metricLabel__7EpLZ",metricValue:"FarmList_metricValue__u9Gd5",metricSubtitle:"FarmList_metricSubtitle__0hGNX",viewPropertyButton:"FarmList_viewPropertyButton__ehZIL",buyModal:"FarmList_buyModal__Oknwj"}},50882:e=>{e.exports={holdingListContainer:"HoldingList_holdingListContainer__t_9s1",holdingListHeader:"HoldingList_holdingListHeader__2rLnJ",holdingListTitle:"HoldingList_holdingListTitle__bu9os",totalValueContainer:"HoldingList_totalValueContainer__KnDIY",holdingLabel:"HoldingList_holdingLabel__fCc6i",holdingValue:"HoldingList_holdingValue__Q5Ybj",assetsHeader:"HoldingList_assetsHeader__qa_S6",headerCell:"HoldingList_headerCell__MRJ12",assetRow:"HoldingList_assetRow__MbLT9",assetCell:"HoldingList_assetCell__Nb7Eq",noAssetsMessage:"HoldingList_noAssetsMessage__VgtA3"}},81036:e=>{e.exports={dashboardContainer:"dashboard_dashboardContainer__CATW1",dashboardContent:"dashboard_dashboardContent__ZHYXz",dashboardStack:"dashboard_dashboardStack__uXrCZ",holdingsSection:"dashboard_holdingsSection__ymduN",farmsSection:"dashboard_farmsSection__FGHsZ"}}},e=>{var a=a=>e(e.s=a);e.O(0,[502,49,770,12,320,683,488,944,316,9,574,431,849,441,517,358],()=>a(73801)),_N_E=e.O()}]);